(function(t){function e(e){for(var i,o,a=e[0],l=e[1],c=e[2],u=0,p=[];u<a.length;u++)o=a[u],n[o]&&p.push(n[o][0]),n[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,a=1;a<s.length;a++){var l=s[a];0!==n[l]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={app:0},r=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var h=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"0207":function(t,e,s){},"0671":function(t,e,s){},"079a":function(t,e,s){"use strict";var i=s("c6f4"),n=s.n(i);n.a},"07bb":function(t,e,s){},"0853":function(t,e,s){},"09a9":function(t,e,s){var i;(function t(e,s,n){function r(a,l){if(!s[a]){if(!e[a]){var c="function"==typeof i&&i;if(!l&&c)return i(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=s[a]={exports:{}};e[a][0].call(u.exports,function(t){var s=e[a][1][t];return r(s||t)},u,u.exports,t,e,s,n)}return s[a].exports}for(var o="function"==typeof i&&i,a=0;a<n.length;a++)r(n[a]);return r})({1:[function(t,e,s){var i=t("./TypedNeuQuant.js"),n=t("./LZWEncoder.js");function r(){this.page=-1,this.pages=[],this.newPage()}r.pageSize=4096,r.charMap={};for(var o=0;o<256;o++)r.charMap[o]=String.fromCharCode(o);function a(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new r}r.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(r.pageSize),this.cursor=0},r.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var s=0;s<r.pageSize;s++)t+=r.charMap[this.pages[e][s]];return t},r.prototype.writeByte=function(t){this.cursor>=r.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},r.prototype.writeUTFBytes=function(t){for(var e=t.length,s=0;s<e;s++)this.writeByte(t.charCodeAt(s))},r.prototype.writeBytes=function(t,e,s){for(var i=s||t.length,n=e||0;n<i;n++)this.writeByte(t[n])},a.prototype.setDelay=function(t){this.delay=Math.round(t/10)},a.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},a.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},a.prototype.setRepeat=function(t){this.repeat=t},a.prototype.setTransparent=function(t){this.transparent=t},a.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},a.prototype.finish=function(){this.out.writeByte(59)},a.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},a.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},a.prototype.setGlobalPalette=function(t){this.globalPalette=t},a.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},a.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},a.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new i(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},a.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var s=0,i=0;i<e;i++){var n=this.findClosestRGB(255&this.pixels[s++],255&this.pixels[s++],255&this.pixels[s++]);this.usedEntry[n]=!0,this.indexedPixels[i]=n}},a.prototype.ditherPixels=function(t,e){var s={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!s[t])throw"Unknown dithering kernel: "+t;var i=s[t],n=0,r=this.height,o=this.width,a=this.pixels,l=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<r;c++){e&&(l*=-1);for(var h=1==l?0:o-1,u=1==l?o:0;h!==u;h+=l){n=c*o+h;var p=3*n,d=a[p],f=a[p+1],m=a[p+2];p=this.findClosestRGB(d,f,m),this.usedEntry[p]=!0,this.indexedPixels[n]=p,p*=3;for(var g=this.colorTab[p],v=this.colorTab[p+1],b=this.colorTab[p+2],x=d-g,y=f-v,w=m-b,_=1==l?0:i.length-1,A=1==l?i.length:0;_!==A;_+=l){var S=i[_][1],E=i[_][2];if(S+h>=0&&S+h<o&&E+c>=0&&E+c<r){var M=i[_][0];p=n+S+E*o,p*=3,a[p]=Math.max(0,Math.min(255,a[p]+x*M)),a[p+1]=Math.max(0,Math.min(255,a[p+1]+y*M)),a[p+2]=Math.max(0,Math.min(255,a[p+2]+w*M))}}}}},a.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},a.prototype.findClosestRGB=function(t,e,s,i){if(null===this.colorTab)return-1;if(this.neuQuant&&!i)return this.neuQuant.lookupRGB(t,e,s);for(var n=0,r=16777216,o=this.colorTab.length,a=0,l=0;a<o;l++){var c=t-(255&this.colorTab[a++]),h=e-(255&this.colorTab[a++]),u=s-(255&this.colorTab[a++]),p=c*c+h*h+u*u;(!i||this.usedEntry[l])&&p<r&&(r=p,n=l)}return n},a.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var s=this.image,i=0,n=0,r=0;r<e;r++)for(var o=0;o<t;o++)this.pixels[n++]=s[i++],this.pixels[n++]=s[i++],this.pixels[n++]=s[i++],i++},a.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},a.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},a.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},a.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},a.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},a.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},a.prototype.writePixels=function(){var t=new n(this.width,this.height,this.indexedPixels,this.colorDepth);t.encode(this.out)},a.prototype.stream=function(){return this.out},e.exports=a},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(t,e,s){var i=-1,n=12,r=5003,o=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function a(t,e,s,a){var l,c,h,u,p,d,f=Math.max(2,a),m=new Uint8Array(256),g=new Int32Array(r),v=new Int32Array(r),b=0,x=0,y=!1;function w(t,e){m[c++]=t,c>=254&&M(e)}function _(t){A(r),x=p+2,y=!0,C(p,t)}function A(t){for(var e=0;e<t;++e)g[e]=-1}function S(t,e){var s,o,a,l,f,m,b;for(u=t,y=!1,n_bits=u,h=O(n_bits),p=1<<t-1,d=p+1,x=p+2,c=0,l=$(),b=0,s=r;s<65536;s*=2)++b;b=8-b,m=r,A(m),C(p,e);t:while((o=$())!=i)if(s=(o<<n)+l,a=o<<b^l,g[a]!==s){if(g[a]>=0){f=m-a,0===a&&(f=1);do{if((a-=f)<0&&(a+=m),g[a]===s){l=v[a];continue t}}while(g[a]>=0)}C(l,e),l=o,x<1<<n?(v[a]=x++,g[a]=s):_(e)}else l=v[a];C(l,e),C(d,e)}function E(s){s.writeByte(f),remaining=t*e,curPixel=0,S(f+1,s),s.writeByte(0)}function M(t){c>0&&(t.writeByte(c),t.writeBytes(m,0,c),c=0)}function O(t){return(1<<t)-1}function $(){if(0===remaining)return i;--remaining;var t=s[curPixel++];return 255&t}function C(t,e){l&=o[b],b>0?l|=t<<b:l=t,b+=n_bits;while(b>=8)w(255&l,e),l>>=8,b-=8;if((x>h||y)&&(y?(h=O(n_bits=u),y=!1):(++n_bits,h=n_bits==n?1<<n:O(n_bits))),t==d){while(b>0)w(255&l,e),l>>=8,b-=8;M(e)}}this.encode=E}e.exports=a},{}],3:[function(t,e,s){var i=100,n=256,r=n-1,o=4,a=16,l=1<<a,c=10,h=10,u=l>>h,p=l<<c-h,d=n>>3,f=6,m=1<<f,g=d*m,v=30,b=10,x=1<<b,y=8,w=1<<y,_=b+y,A=1<<_,S=499,E=491,M=487,O=503,$=3*O;function C(t,e){var s,d,m,b,y;function _(){var t,e;for(s=[],d=new Int32Array(256),m=new Int32Array(n),b=new Int32Array(n),y=new Int32Array(n>>3),t=0;t<n;t++)e=(t<<o+8)/n,s[t]=new Float64Array([e,e,e,0]),b[t]=l/n,m[t]=0}function C(){for(var t=0;t<n;t++)s[t][0]>>=o,s[t][1]>>=o,s[t][2]>>=o,s[t][3]=t}function k(t,e,i,n,r){s[e][0]-=t*(s[e][0]-i)/x,s[e][1]-=t*(s[e][1]-n)/x,s[e][2]-=t*(s[e][2]-r)/x}function j(t,e,i,r,o){var a,l,c=Math.abs(e-t),h=Math.min(e+t,n),u=e+1,p=e-1,d=1;while(u<h||p>c)l=y[d++],u<h&&(a=s[u++],a[0]-=l*(a[0]-i)/A,a[1]-=l*(a[1]-r)/A,a[2]-=l*(a[2]-o)/A),p>c&&(a=s[p--],a[0]-=l*(a[0]-i)/A,a[1]-=l*(a[1]-r)/A,a[2]-=l*(a[2]-o)/A)}function F(t,e,i){var r,l,d,f,g,v=~(1<<31),x=v,y=-1,w=y;for(r=0;r<n;r++)l=s[r],d=Math.abs(l[0]-t)+Math.abs(l[1]-e)+Math.abs(l[2]-i),d<v&&(v=d,y=r),f=d-(m[r]>>a-o),f<x&&(x=f,w=r),g=b[r]>>h,b[r]-=g,m[r]+=g<<c;return b[y]+=u,m[y]-=p,w}function N(){var t,e,i,o,a,l,c=0,h=0;for(t=0;t<n;t++){for(i=s[t],a=t,l=i[1],e=t+1;e<n;e++)o=s[e],o[1]<l&&(a=e,l=o[1]);if(o=s[a],t!=a&&(e=o[0],o[0]=i[0],i[0]=e,e=o[1],o[1]=i[1],i[1]=e,e=o[2],o[2]=i[2],i[2]=e,e=o[3],o[3]=i[3],i[3]=e),l!=c){for(d[c]=h+t>>1,e=c+1;e<l;e++)d[e]=t;c=l,h=t}}for(d[c]=h+r>>1,e=c+1;e<256;e++)d[e]=r}function I(t,e,i){var r,o,a,l=1e3,c=-1,h=d[e],u=h-1;while(h<n||u>=0)h<n&&(o=s[h],a=o[1]-e,a>=l?h=n:(h++,a<0&&(a=-a),r=o[0]-t,r<0&&(r=-r),a+=r,a<l&&(r=o[2]-i,r<0&&(r=-r),a+=r,a<l&&(l=a,c=o[3])))),u>=0&&(o=s[u],a=e-o[1],a>=l?u=-1:(u--,a<0&&(a=-a),r=o[0]-t,r<0&&(r=-r),a+=r,a<l&&(r=o[2]-i,r<0&&(r=-r),a+=r,a<l&&(l=a,c=o[3]))));return c}function P(){var s,n,r,a,l,c,h=t.length,u=30+(e-1)/3,p=h/(3*e),d=~~(p/i),m=x,b=g,_=b>>f;for(_<=1&&(_=0),s=0;s<_;s++)y[s]=m*((_*_-s*s)*w/(_*_));h<$?(e=1,n=3):n=h%S!==0?3*S:h%E!==0?3*E:h%M!==0?3*M:3*O;var A=0;s=0;while(s<p)if(r=(255&t[A])<<o,a=(255&t[A+1])<<o,l=(255&t[A+2])<<o,c=F(r,a,l),k(m,c,r,a,l),0!==_&&j(_,c,r,a,l),A+=n,A>=h&&(A-=h),s++,0===d&&(d=1),s%d===0)for(m-=m/u,b-=b/v,_=b>>f,_<=1&&(_=0),c=0;c<_;c++)y[c]=m*((_*_-c*c)*w/(_*_))}function R(){_(),P(),C(),N()}function L(){for(var t=[],e=[],i=0;i<n;i++)e[s[i][3]]=i;for(var r=0,o=0;o<n;o++){var a=e[o];t[r++]=s[a][0],t[r++]=s[a][1],t[r++]=s[a][2]}return t}this.buildColormap=R,this.getColormap=L,this.lookupRGB=I}e.exports=C},{}],4:[function(t,e,s){var i,n;i=t("./GIFEncoder.js"),n=function(t){var e,s,n,r;return e=new i(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),n=e.stream(),t.data=n.pages,t.cursor=n.cursor,t.pageSize=n.constructor.pageSize,t.canTransfer?(r=function(){var e,i,n,r;for(n=t.data,r=[],e=0,i=n.length;e<i;e++)s=n[e],r.push(s.buffer);return r}(),self.postMessage(t,r)):self.postMessage(t)},self.onmessage=function(t){return n(t.data)}},{"./GIFEncoder.js":1}]},{},[4])},"238d":function(t,e,s){"use strict";var i=s("efa9"),n=s.n(i);n.a},"2e1a":function(t,e,s){},"33ce":function(t,e,s){"use strict";var i=s("45c6"),n=s.n(i);n.a},"45c6":function(t,e,s){},"49df":function(t,e,s){"use strict";var i=s("53fd"),n=s.n(i);n.a},"529b":function(t,e,s){},"53fd":function(t,e,s){},"5c0b":function(t,e,s){"use strict";var i=s("e332"),n=s.n(i);n.a},"65b8":function(t,e,s){"use strict";var i=s("529b"),n=s.n(i);n.a},"6a54":function(t,e,s){},"6c11":function(t,e,s){},"736a":function(t,e,s){},7520:function(t,e,s){"use strict";var i=s("0853"),n=s.n(i);n.a},"84a3":function(t,e,s){"use strict";var i=s("9251"),n=s.n(i);n.a},"91ae":function(t,e,s){"use strict";var i=s("6c11"),n=s.n(i);n.a},9251:function(t,e,s){},9590:function(t,e,s){"use strict";var i=s("d134"),n=s.n(i);n.a},9603:function(t,e,s){"use strict";var i=s("abaf"),n=s.n(i);n.a},9882:function(t,e,s){"use strict";var i=s("f147"),n=s.n(i);n.a},"9c7b":function(t,e,s){"use strict";var i=s("736a"),n=s.n(i);n.a},"9fdb":function(t,e,s){"use strict";(function(t,e){var i;s("ac6a");(function(i){if("object"===typeof exports&&"undefined"!==typeof t)t.exports=i();else if("function"===typeof define&&s("3c35"))define([],i);else{var n;n="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:this,n.GIF=i()}})(function(){return function t(e,s,n){function r(a,l){if(!s[a]){if(!e[a]){var c="function"==typeof i&&i;if(!l&&c)return i(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=s[a]={exports:{}};e[a][0].call(u.exports,function(t){var s=e[a][1][t];return r(s||t)},u,u.exports,t,e,s,n)}return s[a].exports}for(var o="function"==typeof i&&i,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,s){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"===typeof t}function r(t){return"number"===typeof t}function o(t){return"object"===typeof t&&null!==t}function a(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,s,i,r,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(s=this._events[t],a(s))return!1;if(n(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),s.apply(this,r)}else if(o(s))for(r=Array.prototype.slice.call(arguments,1),c=s.slice(),i=c.length,l=0;l<i;l++)c[l].apply(this,r);return!0},i.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(s=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"===typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var s=!1;function i(){this.removeListener(t,i),s||(s=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var s,i,r,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=this._events[t],r=s.length,i=-1,s===e||n(s.listener)&&s.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(s)){for(a=r;a-- >0;)if(s[a]===e||s[a].listener&&s[a].listener===e){i=a;break}if(i<0)return this;1===s.length?(s.length=0,delete this._events[t]):s.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[t],n(s))this.removeListener(t,s);else if(s)while(s.length)this.removeListener(t,s[s.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[],e},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,s){var i,n,r,o,a;a=navigator.userAgent.toLowerCase(),o=navigator.platform.toLowerCase(),i=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],r="ie"===i[1]&&document.documentMode,n={name:"version"===i[1]?i[3]:i[1],version:r||parseFloat("opera"===i[1]&&i[4]?i[4]:i[2]),platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||o.match(/mac|win|linux/)||["other"])[0]}},n[n.name]=!0,n[n.name+parseInt(n.version,10)]=!0,n.platform[n.platform.name]=!0,e.exports=n},{}],3:[function(t,e,s){var i,n,r,o=function(t,e){for(var s in e)a.call(e,s)&&(t[s]=e[s]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,s=this.length;e<s;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice;i=t("events").EventEmitter,r=t("./browser.coffee"),n=function(t){var e,s;function i(t){var s,i,n;for(i in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),e)n=e[i],null==(s=this.options)[i]&&(s[i]=n)}return o(i,t),e={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},s={delay:500,copy:!1},i.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},i.prototype.setOptions=function(t){var e,s,i;for(e in s=[],t)a.call(t,e)&&(i=t[e],s.push(this.setOption(e,i)));return s},i.prototype.addFrame=function(t,e){var i,n;for(n in null==e&&(e={}),i={},i.transparent=this.options.transparent,s)i[n]=e[n]||s[n];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!==typeof ImageData&&null!==ImageData&&t instanceof ImageData)i.data=t.data;else if("undefined"!==typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!==typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?i.data=this.getContextData(t):i.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?i.data=this.getImageData(t):i.image=t}return this.frames.push(i)},i.prototype.render=function(){var t,e,s;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,s;for(s=[],t=0,e=this.frames.length;0<=e?t<e:t>e;0<=e?++t:--t)s.push(null);return s}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,s=e;0<=s?t<s:t>s;0<=s?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},i.prototype.abort=function(){var t;while(1){if(t=this.activeWorkers.shift(),null==t)break;this.log("killing active worker"),t.terminate()}return this.running=!1,this.emit("abort")},i.prototype.spawnWorkers=function(){var t,e,s;return t=Math.min(this.options.workers,this.frames.length),function(){s=[];for(var i=e=this.freeWorkers.length;e<=t?i<t:i>t;e<=t?i++:i--)s.push(i);return s}.apply(this).forEach(function(t){return function(e){var s;return t.log("spawning worker "+e),s=new Worker(t.options.workerScript),s.onmessage=function(e){return t.activeWorkers.splice(t.activeWorkers.indexOf(s),1),t.freeWorkers.push(s),t.frameFinished(e.data)},t.freeWorkers.push(s)}}(this)),t},i.prototype.frameFinished=function(t){var e,s;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,s=this.freeWorkers.length;1<=s?e<s:e>s;1<=s?++e:--e)this.renderNextFrame();return l.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},i.prototype.finishRendering=function(){var t,e,s,i,n,r,o,a,l,c,h,u,p,d,f,m;for(a=0,d=this.imageParts,n=0,l=d.length;n<l;n++)e=d[n],a+=(e.data.length-1)*e.pageSize+e.cursor;for(a+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(a/1e3)+"kb"),t=new Uint8Array(a),u=0,f=this.imageParts,r=0,c=f.length;r<c;r++)for(e=f[r],m=e.data,s=o=0,h=m.length;o<h;s=++o)p=m[s],t.set(p,u),s===e.data.length-1?u+=e.cursor:u+=e.pageSize;return i=new Blob([t],{type:"image/gif"}),this.emit("finished",i,t)},i.prototype.renderNextFrame=function(){var t,e,s;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],s=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(s),s.postMessage(e)},i.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},i.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),e=this._canvas.getContext("2d"),e.setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},i.prototype.getTask=function(t){var e,s;if(e=this.frames.indexOf(t),s={index:e,last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===r.name},null!=t.data)s.data=t.data;else if(null!=t.context)s.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");s.data=this.getImageData(t.image)}return s},i.prototype.log=function(){var t;if(t=1<=arguments.length?c.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},i}(i),e.exports=n},{"./browser.coffee":2,events:1}]},{},[3])(3)})}).call(this,s("dd40")(t),s("c8ba"))},a0aa:function(t,e,s){},abaf:function(t,e,s){},b0a0:function(t,e,s){"use strict";var i=s("07bb"),n=s.n(i);n.a},ba48:function(t,e,s){},c35c:function(t,e,s){"use strict";var i=s("0207"),n=s.n(i);n.a},c6f4:function(t,e,s){},cd49:function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("modular-panes",{attrs:{direction:"vertical",id:"mainwrapper"}},[s("modular-pane",{attrs:{size:.8,id:"mainpane"}},[s("app-plot"),s("app-control-bar")],1),s("modular-pane",{attrs:{size:.2,minSize:"20em",id:"sidebarpane"}},[s("app-title-bar",{attrs:{id:"titlebar"}}),s("app-side-bar",{attrs:{id:"sidebar"}})],1)],1)],1)},r=[],o=s("9ab4"),a=s("60a3"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"plot"}},[s("svg",{ref:"grid",attrs:{id:"svg",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100"}},[s("defs",[s("filter",{attrs:{id:"backdrop"}},[s("feMorphology",{attrs:{operator:"dilate",radius:"2",in:"SourceAlpha",result:"dilated"}}),s("feColorMatrix",{attrs:{in:"dilated",type:"matrix",values:"-1 0 0 0 1\n                                                            0 -1 0 0 1\n                                                            0 0 -1 0 1\n                                                            0 0 0 1 0"}}),s("feComposite",{attrs:{in:"SourceGraphic"}})],1)])]),s("canvas",{ref:"plot",attrs:{id:"canvas"}})])},c=[],h=s("2ef0"),u=s("1266"),p=s("6149"),d=s.n(p);const f="precision highp float;\r\n\r\nuniform sampler2D u_texture;\r\nuniform vec2 u_texture_dim;\r\nuniform vec3 u_color_x;\r\nuniform vec3 u_color_y;\r\nuniform bool u_enable_x;\r\nuniform bool u_enable_y;\r\nuniform float u_threshold;\r\n\r\nvoid main() {\r\n    vec2 uv = gl_FragCoord.xy / u_texture_dim;\r\n//    vec2 pixel = vec2(1, 1) / u_texture_dim;\r\n//    vec4 val = texture2D(u_texture, uv);\r\n\r\n    vec4 up = texture2D(u_texture, uv + vec2(0, -u_threshold));\r\n    vec4 down = texture2D(u_texture, uv + vec2(0, u_threshold));\r\n    vec4 left = texture2D(u_texture, uv + vec2(-u_threshold, 0));\r\n    vec4 right = texture2D(u_texture, uv + vec2(u_threshold, 0));\r\n    vec4 middle = texture2D(u_texture, uv);\r\n\r\n    float alphaX = 0.0;\r\n    float alphaY = 0.0;\r\n\r\n    if(u_enable_x) {\r\n        float flipVertical = sign(up.x * down.x); // if 0 or -1 yes, 1 no\r\n        flipVertical = floor((flipVertical + 1.0) / 2.0); // 0 yes, 1 no\r\n\r\n        float flipHorizontal = sign(left.x * right.x); // if 0 or -1 yes, 1 no\r\n        flipHorizontal = floor((flipHorizontal + 1.0) / 2.0); // 0 yes, 1 no\r\n\r\n        alphaX = 1.0 - flipVertical * flipHorizontal;\r\n    }\r\n\r\n    if(u_enable_y) {\r\n        float flipVertical = sign(up.y * down.y); // if 0 or -1 yes, 1 no\r\n        flipVertical = floor((flipVertical + 1.0) / 2.0); // 0 yes, 1 no\r\n\r\n        float flipHorizontal = sign(left.y * right.y); // if 0 or -1 yes, 1 no\r\n        flipHorizontal = floor((flipHorizontal + 1.0) / 2.0); // 0 yes, 1 no\r\n\r\n        alphaY = 1.0 - flipVertical * flipHorizontal;\r\n    }\r\n\r\n    vec3 color = alphaX * u_color_x + alphaY * u_color_y;\r\n    if (alphaX + alphaY != 0.0) {\r\n        color /= alphaX + alphaY;\r\n    }\r\n\r\n    gl_FragColor = vec4(color, ceil((alphaX+alphaY)/2.0));\r\n\r\n\r\n\r\n//        float alpha = pow(1.0 - abs(val.x) / u_threshold, 2.0);\r\n//        alpha = 1.0;\r\n//        gl_FragColor = vec4(u_color_x,alpha);\r\n\r\n\r\n\r\n//    } else if(u_enable_y && abs(val.y) < u_threshold) {\r\n//        float alpha = pow(1.0 - abs(val.y) / u_threshold, 2.0);\r\n//        alpha = 1.0;\r\n//        gl_FragColor = vec4(u_color_y, alpha);\r\n//    }\r\n}\r\n",m="precision highp float;\r\n\r\nattribute vec2 a_position;\r\n\r\nvoid main() {\r\n//    v_color = a_color;\r\n\r\n    gl_Position = vec4(a_position, 0.0, 1.0);\r\n}\r\n";class g{constructor(t,e,s,i,n){this.gl=t,this.programInfo=Object(u["createProgramInfo"])(this.gl,[m,f]),this.ODEEstimator=n,this.settings=i,this.functionArray=new Float32Array(e*s*3);const r=t.getExtension("OES_texture_float"),o=t.getExtension("OES_texture_float_linear");console.log(r,o),this.renderFunction(),this.initUniformsAndBuffers()}updateSettings(t){this.settings=t}updateColor(){this.uniforms.u_color_x=d()(this.settings.nullclineXColor).gl(),this.uniforms.u_color_y=d()(this.settings.nullclineYColor).gl(),this.uniforms.u_color_x.pop(),this.uniforms.u_color_y.pop()}updateThreshold(){this.uniforms.u_threshold=this.settings.nullclineThreshold}updateEnabled(){this.uniforms.u_enable_x=this.settings.nullclineXEnable,this.uniforms.u_enable_y=this.settings.nullclineYEnable}updateSize(){const t=this.gl.canvas.width,e=this.gl.canvas.height;this.functionArray=new Float32Array(t*e*3),this.updateFunction()}updateFunction(){const t=this.gl.canvas.width,e=this.gl.canvas.height;this.renderFunction(),Object(u["setTextureFromArray"])(this.gl,this.functionImage,this.functionArray,{target:this.gl.TEXTURE_2D,width:this.gl.canvas.width,height:this.gl.canvas.height,minMag:this.gl.LINEAR,internalFormat:this.gl.RGB,format:this.gl.RGB,type:this.gl.FLOAT}),this.uniforms.u_texture_dim=[t,e]}renderFunction(){const t=this.gl.canvas.width,e=this.gl.canvas.height,s=this.settings.viewbox.x.max-this.settings.viewbox.x.min,i=this.settings.viewbox.y.max-this.settings.viewbox.y.min;for(let n=0;n<this.functionArray.length;n++){const r=n%3,o=n/3>>0;if(2===r){this.functionArray[n]=0;continue}const a=this.settings.viewbox.x.min+o/t%1*s,l=this.settings.viewbox.y.min+(o/t>>0)/e*i;this.functionArray[n]=r?this.ODEEstimator.dxFunction(a,l):this.ODEEstimator.dyFunction(a,l)}}initUniformsAndBuffers(){this.functionImage=Object(u["createTexture"])(this.gl,{target:this.gl.TEXTURE_2D,width:this.gl.canvas.width,height:this.gl.canvas.height,minMag:this.gl.LINEAR,internalFormat:this.gl.RGB,format:this.gl.RGB,type:this.gl.FLOAT,src:this.functionArray}),this.uniforms={u_texture:this.functionImage,u_texture_dim:[this.gl.canvas.width,this.gl.canvas.height],u_enable_x:this.settings.nullclineXEnable,u_enable_y:this.settings.nullclineYEnable,u_threshold:this.settings.nullclineThreshold},this.updateColor();const t={position:{numComponents:2,data:[-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]}};this.bufferInfo=Object(u["createBufferInfoFromArrays"])(this.gl,t)}render(){this.gl.useProgram(this.programInfo.program),Object(u["setBuffersAndAttributes"])(this.gl,this.programInfo,this.bufferInfo),Object(u["setUniforms"])(this.programInfo,this.uniforms),Object(u["drawBufferInfo"])(this.gl,this.bufferInfo)}}var v=s("2f62");const b={fullscreen:!1,playing:!0,plot:null},x={setPlot(t,e){t.plot=e},setFullscreen(t,e){t.fullscreen=e},setPlaying(t,e){t.playing=e}},y={playOrPause(t){t.commit("setPlaying",!t.state.playing)},initPlot(t,e){t.commit("setPlot",e)},requestFullscreen(t){if(!t.state.plot)return;const e=t.state.fullscreen;return e?document.exitFullscreen():t.state.plot.canvas.parentElement.parentElement.requestFullscreen()}},w={};var _,A,S={state:b,mutations:x,actions:y,getters:w};(function(t){t[t["Cartesian"]=0]="Cartesian",t[t["Polar"]=1]="Polar",t[t["Matrix"]=2]="Matrix"})(_||(_={})),function(t){t[t["EULER"]=0]="EULER",t[t["RK2"]=1]="RK2",t[t["RK4"]=2]="RK4"}(A||(A={}));const E="settings:",M={viewbox:{x:{min:-6,max:6},y:{min:-3,max:3}},keepAspectRatio:!0,speed:1,normalizeSpeed:!1,ODEAproxmethod:A.RK2,arrowAmount:5e3,arrowMaxAge:200,arrowRandomizeMaxAge:!1,arrowSize:5,arrowColor:"#3f95eb",arrowRandomColor:!0,solutionStepSize:.01,solutionLength:10,solutionWidth:4,solutionSubSteps:10,solutionColor:"#9EFD38",solutionODEApproxMethod:A.RK4,nullclineXEnable:!0,nullclineXColor:"#c711ff",nullclineYEnable:!0,nullclineYColor:"#ffbc03",nullclineThreshold:.001,drawFunctionBackground:!1,useCached:!1,dxString:String.raw`\sin (x \cdot y)`,dyString:String.raw`\sin(x + y)`,drString:String.raw`r \cdot (r-1) \cdot (r-2)`,dtString:String.raw`1`,AMatrix:[2,1,-1,2],ODEType:_.Polar};function O(){const t=Object(h["cloneDeep"])(M);for(let e=0;e<localStorage.length;e++){let s=localStorage.key(e);if(!s||!s.startsWith(E))continue;const i=JSON.parse(localStorage.getItem(s));s=s.replace(E,""),Object(h["set"])(t,s,i)}return t}const $={changeValue(t,{key:e,val:s}){const i=typeof Object(h["get"])(t,e);if("number"===i){if("string"===typeof s){if(""===s)return;if(s=parseFloat(s),Number.isNaN(s))return}Object(h["set"])(t,e,s)}else Object(h["set"])(t,e,s);if(e.startsWith("viewbox")&&t.keepAspectRatio||"keepAspectRatio"===e&&s){const s=100,i=document.getElementById("canvas"),n=t.viewbox.x.max-t.viewbox.x.min,r=t.viewbox.y.max-t.viewbox.y.min;if(e.startsWith("viewbox.x")){const e=n*i.height/i.width;t.viewbox.y.min+=(r-e)/2,t.viewbox.y.max-=(r-e)/2,t.viewbox.y.min=Math.round(t.viewbox.y.min*s)/s,t.viewbox.y.max=Math.round(t.viewbox.y.max*s)/s,localStorage.setItem(E+"viewbox.y.min",t.viewbox.y.min),localStorage.setItem(E+"viewbox.y.max",t.viewbox.y.max)}else{const e=r*i.width/i.height;t.viewbox.x.min+=(n-e)/2,t.viewbox.x.max-=(n-e)/2,t.viewbox.x.min=Math.round(t.viewbox.x.min*s)/s,t.viewbox.x.max=Math.round(t.viewbox.x.max*s)/s,localStorage.setItem(E+"viewbox.x.min",t.viewbox.x.min),localStorage.setItem(E+"viewbox.x.max",t.viewbox.x.max)}}localStorage.setItem(E+e,JSON.stringify(s))}},C={resetValue(t,e){const s=Object(h["get"])(M,e);t.commit("changeValue",{key:e,val:s})}},k={},j={state:O(),mutations:$,actions:C,getters:k};var F=j;i["a"].use(v["a"]);var N=new v["a"].Store({modules:{plot:S,settings:F}});const I="precision highp float;\r\n\r\nvarying vec3 v_color;\r\nvarying float v_alpha;\r\n\r\nvoid main() {\r\n    gl_FragColor = vec4(v_color, v_alpha);\r\n}\r\n",P="precision highp float;\r\n\r\nattribute vec2 a_vert_pos;\r\nattribute vec2 a_glob_pos;\r\nattribute vec3 a_color;\r\nattribute float a_alpha;\r\nattribute float a_dx;\r\nattribute float a_dy;\r\n\r\nuniform mat4 u_camera;\r\nuniform mat4 u_screen;\r\n\r\nvarying vec3 v_color;\r\nvarying float v_alpha;\r\n\r\nvoid main() {\r\n//    float width = 2.0 / u_screen[0][0] + 2.0 / u_camera[0][0];\r\n//    float height = 2.0 / u_screen[1][1] + 2.0 / u_camera[1][1];\r\n    vec2 direction = vec2(a_dx, a_dy);\r\n    vec2 distance = abs(direction);\r\n    float rotation = atan(direction.x, direction.y);\r\n//    float rotation = atan(direction.x * width, direction.y * height);\r\n    mat2 rot_mat = mat2(\r\n        cos(rotation), -sin(rotation),\r\n        sin(rotation), cos(rotation)\r\n    );\r\n\r\n    vec4 glob_pos = u_camera * vec4(a_glob_pos, 0.0, 1.0);\r\n    vec4 vert_pos = u_screen * vec4(rot_mat * a_vert_pos, 0.0, 1.0);\r\n\r\n    v_color = a_color;\r\n    v_alpha = a_alpha;\r\n\r\n    gl_Position = vec4(glob_pos.xy + vert_pos.xy, a_alpha-1.0, 1.0);\r\n}\r\n";class R{constructor(t,e,s,i){this.gl=t,this.settings=s,this.ODEEstimator=i,Object(u["addExtensionsToContext"])(this.gl),this.programInfo=Object(u["createProgramInfo"])(this.gl,[P,I]),this.arrow=[],this.resizeArrows(!1),this.pos=new Float32Array(2*R.MAX_NUM_ARROWS),this.age=new Uint16Array(R.MAX_NUM_ARROWS),this.color=new Float32Array(3*R.MAX_NUM_ARROWS),this.alpha=new Float32Array(R.MAX_NUM_ARROWS),this.dx=new Float32Array(R.MAX_NUM_ARROWS),this.dy=new Float32Array(R.MAX_NUM_ARROWS),this.initArrows(),this.arrowArray={a_vert_pos:{numComponents:2,data:this.arrow},a_glob_pos:{numComponents:2,data:this.pos,divisor:1},a_color:{numComponents:3,data:this.color,divisor:1},a_alpha:{numComponents:1,data:this.alpha,divisor:1},a_dx:{numComponents:1,data:this.dx,divisor:1},a_dy:{numComponents:1,data:this.dy,divisor:1}},this.arrowInfoBuffer=Object(u["createBufferInfoFromArrays"])(this.gl,this.arrowArray),this.arrowVertexArray=Object(u["createVertexArrayInfo"])(this.gl,this.programInfo,this.arrowInfoBuffer),this.uniforms=e}render(){this.move(),this.gl.useProgram(this.programInfo.program),Object(u["setAttribInfoBufferFromArray"])(this.gl,this.arrowInfoBuffer.attribs.a_glob_pos,this.arrowArray.a_glob_pos),Object(u["setAttribInfoBufferFromArray"])(this.gl,this.arrowInfoBuffer.attribs.a_color,this.arrowArray.a_color),Object(u["setAttribInfoBufferFromArray"])(this.gl,this.arrowInfoBuffer.attribs.a_alpha,this.arrowArray.a_alpha),Object(u["setAttribInfoBufferFromArray"])(this.gl,this.arrowInfoBuffer.attribs.a_dx,this.arrowArray.a_dx),Object(u["setAttribInfoBufferFromArray"])(this.gl,this.arrowInfoBuffer.attribs.a_dy,this.arrowArray.a_dy),Object(u["setBuffersAndAttributes"])(this.gl,this.programInfo,this.arrowVertexArray),Object(u["setUniforms"])(this.programInfo,this.uniforms),Object(u["drawBufferInfo"])(this.gl,this.arrowVertexArray,this.gl.TRIANGLES,this.arrowVertexArray.numElements,0,this.settings.arrowAmount)}updateSettings(t){this.settings=t}resizeArrows(t=!0){const e=this.makeArrow(1,.3,1.5,this.settings.arrowSize);if(t){for(let t=0;t<e.length;t++)this.arrow[t]=e[t];Object(u["setAttribInfoBufferFromArray"])(this.gl,this.arrowInfoBuffer.attribs.a_vert_pos,this.arrowArray.a_vert_pos)}else this.arrow=e}colorArrows(){const t=d()(this.settings.arrowColor);if(this.settings.arrowRandomColor){const[e,s,i]=t.hsl(),n=20,r=.2,o=.2;for(let a=0;a<this.pos.length;a++){const[l,c,h]=t.set("hsl.h",e+this.randomInt(-n,n)).set("hsl.s",s+this.randomFloat(-r,r)).set("hsl.l",i+this.randomFloat(-o,o)).gl();this.color[3*a]=l,this.color[3*a+1]=c,this.color[3*a+2]=h}}else{const[e,s,i]=t.gl();for(let t=0;t<this.pos.length;t++)this.color[3*t]=e,this.color[3*t+1]=s,this.color[3*t+2]=i}}initArrows(){for(let t=0;t<this.pos.length;t++){const e=this.randomFloat(this.settings.viewbox.x.min,this.settings.viewbox.x.max),s=this.randomFloat(this.settings.viewbox.y.min,this.settings.viewbox.y.max);this.pos[2*t]=e,this.pos[2*t+1]=s,this.dx[t]=this.ODEEstimator.dxFunction(e,s),this.dy[t]=this.ODEEstimator.dyFunction(e,s),this.age[t]=this.randomInt(0,this.settings.arrowMaxAge),this.alpha[t]=0}this.colorArrows()}move(){const t=this.settings.speed/100,e=this.settings.normalizeSpeed,s=this.settings.ODEAproxmethod,i={posX:0,posY:0,stepX:0,stepY:0,dx:0,dy:0};for(let n=0;n<this.settings.arrowAmount;n++)if(i.posX=this.pos[2*n],i.posY=this.pos[2*n+1],i.dx=this.dx[n],i.dy=this.dy[n],this.ODEEstimator.stepFrom(i,t,e,s),this.pos[2*n]=i.posX,this.pos[2*n+1]=i.posY,this.dx[n]=i.dx,this.dy[n]=i.dy,this.alpha[n]=1,(isNaN(i.dx)||isNaN(i.dy))&&(this.alpha[n]=0,this.age[n]=this.settings.arrowMaxAge),this.age[n]+=1,this.age[n]>=this.settings.arrowMaxAge||!this.isInBounds(i.posX,i.posY)){const t=this.randomFloat(this.settings.viewbox.x.min,this.settings.viewbox.x.max),e=this.randomFloat(this.settings.viewbox.y.min,this.settings.viewbox.y.max);this.pos[2*n]=t,this.pos[2*n+1]=e;const s=this.ODEEstimator.dxFunction(t,e),i=this.ODEEstimator.dyFunction(t,e);this.dx[n]=s,this.dy[n]=i,this.settings.arrowRandomizeMaxAge?this.age[n]=Math.round(Math.random()*this.settings.arrowMaxAge*.1):this.age[n]=0,this.alpha[n]=isNaN(this.dx[n])||isNaN(this.dy[n])?0:1}}isInBounds(t,e){return this.settings.viewbox.x.min<=t&&this.settings.viewbox.x.max>=t&&this.settings.viewbox.y.min<=e&&this.settings.viewbox.y.max>=e}randomFloat(t,e){return t+Math.random()*(e-t)}randomInt(t,e){return Math.floor(t+Math.random()*(e-t))}makeArrow(t,e,s,i=1){let n=[t,0,-t,0,0,t,e,0,-e,0,-e,-s,e,-s,-e,-s,e,0];return n=n.map(t=>t*i),n}}R.MAX_NUM_ARROWS=1e4;class L{constructor(t){this.maxLength=t,this.decimalFormat=new Intl.NumberFormat("en-US",{maximumSignificantDigits:t})}format(t){let e=this.decimalFormat.format(t);return e.length>this.maxLength&&(e=t.toExponential(0)),e}}class D{constructor(t,e){this.minGap=10,this.svg=t,this.settings=e,this.format=new L(5),this.numbersHorizantal=[],this.numbersVertical=[],this.linesHorizontal=[],this.linesVertical=[],this.gridNumX=Math.floor(this.svg.clientWidth/this.minGap),this.gridNumY=Math.floor(this.svg.clientHeight/this.minGap);for(let s=0;s<this.gridNumX;s++){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.classList.add("line_grid"),t.classList.add("line_vertical"),this.linesVertical.push(t),this.svg.appendChild(t)}for(let s=0;s<this.gridNumY;s++){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.classList.add("line_grid"),t.classList.add("line_horizontal"),this.linesHorizontal.push(t),this.svg.appendChild(t)}for(let s=0;s<this.gridNumX/10;s++){const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.classList.add("text_grid"),t.classList.add("text_vertical"),this.numbersVertical.push(t),this.svg.appendChild(t),t.setAttribute("y","50%"),t.setAttribute("dx","-0.2em"),t.setAttribute("dy","1.2em")}for(let s=0;s<this.gridNumY/10;s++){const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.classList.add("text_grid"),t.classList.add("text_horizontal"),this.numbersHorizantal.push(t),this.svg.appendChild(t),t.setAttribute("x","50%"),t.setAttribute("dy","0.4em")}this.render()}render(){const t=this.settings.viewbox.x.max-this.settings.viewbox.x.min,e=this.settings.viewbox.y.max-this.settings.viewbox.y.min,s=this.findOptimalRes(t,this.gridNumX),i=this.findOptimalRes(e,this.gridNumY),n=Math.floor(this.settings.viewbox.x.min/s)*s,r=Math.floor(this.settings.viewbox.y.min/i)*i,o=10*Math.ceil(this.settings.viewbox.x.min/(10*s))-Math.floor(this.settings.viewbox.x.min/s),a=10*Math.ceil(this.settings.viewbox.y.min/(10*i))-Math.floor(this.settings.viewbox.y.min/i);this.svg.setAttribute("viewBox",`0 0 ${this.svg.clientWidth} ${this.svg.clientHeight}`);for(let l=0;l<this.gridNumX;l++){const e=this.linesVertical[l],i=n+l*s,r=(i-this.settings.viewbox.x.min)/t*100;e.setAttribute("x1",`${r}%`),e.setAttribute("x2",`${r}%`),e.setAttribute("y1","0"),e.setAttribute("y2",`${this.svg.clientHeight}`),this.setClass(e,"line_axis",0===i),e.setAttribute("data-x",`${this.format.format(i)}`),e.classList.remove("line_extra")}for(let l=0;10*l+o<this.gridNumX;l++){const t=this.linesVertical[o+10*l];t.classList.add("line_extra");const s=this.numbersVertical[l];s.textContent=t.getAttribute("data-x");const i=this.svg.clientHeight-this.svg.clientHeight*(-this.settings.viewbox.y.min/e);s.setAttribute("x",t.getAttribute("x1")),s.setAttribute("y",i.toString()),s.setAttribute("dy","1.2em");const n=s.getBBox();n.y+n.height>this.svg.clientHeight&&(s.setAttribute("y",this.svg.clientHeight.toString()),s.setAttribute("dy","-0.1em")),this.setClass(s,"text_zero","0"===s.textContent)}for(let l=0;l<this.gridNumY;l++){const t=this.linesHorizontal[l],s=r+l*i,n=100-(s-this.settings.viewbox.y.min)/e*100;t.setAttribute("x1","0"),t.setAttribute("x2",`${this.svg.clientWidth}`),t.setAttribute("y1",`${n}%`),t.setAttribute("y2",`${n}%`),this.setClass(t,"line_axis",0===s),t.setAttribute("data-y",`${this.format.format(s)}`),t.classList.remove("line_extra")}for(let l=0;10*l+a<this.gridNumY;l++){const e=this.linesHorizontal[a+10*l];e.classList.add("line_extra");const s=this.numbersHorizantal[l];s.textContent=e.getAttribute("data-y");const i=this.svg.clientWidth*(-this.settings.viewbox.x.min/t);s.setAttribute("x",i.toString()),s.setAttribute("y",e.getAttribute("y1")),s.setAttribute("dx","-0.3em");const n=s.getBBox();n.x<0&&(s.setAttribute("x","0"),s.setAttribute("dx","0.2em")),this.setClass(s,"text_border",n.x<0),this.setClass(s,"text_zero","0"===s.textContent)}}setClass(t,e,s){s?t.classList.add(e):t.classList.remove(e)}findOptimalRes(t,e){const s=10**Math.floor(Math.log10(t/e));let i=1;for(const n of[1,2,5,10])if(s*n*e>=t){i=n;break}return s*i}updateSettings(t){this.settings=t}}var B=s("c8aa"),T=s.n(B);const z={e:Math.E,"ℯ":Math.E,"ⅇ":Math.E,"π":Math.PI,"τ":2*Math.PI},X={signum:"Math.sign",exp:"Math.exp",pow:"Math.pow",sqrt:"Math.sqrt",abs:"Math.abs",min:"Math.min",max:"Math.max",floor:"Math.floor",ceiling:"Math.ceil",mod:"%",cos:"Math.cos",sin:"Math.sin",tan:"Math.tan",cotangent:"1 / Math.tan",sec:"1 / Math.cos",csc:"1 / Math.sin",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",arccot:"Math.PI / 2 - Math.atan",arcsec:"Math.PI / 2 - Math.atan",arccsc:"Math.PI / 2 - Math.atan",tanh:"Math.tanh"};function q(t,e=["x","y"]){try{return new Function(...e,"return "+W(t,e))}catch(s){throw s}}function W(t,e){let s="";if(void 0===t)return"";if("number"===typeof t||void 0!==t.num){const e="number"===typeof t?t:t.num;s=Number.parseFloat(e).toString()}else if("string"===typeof t||void 0!==t.sym){let i="string"===typeof t?t:t.sym;if("θ"!==i&&"ϑ"!==i||(i="t"),z[i])s=z[i].toString();else{if(!e.includes(i))throw new Error(`Variable "${i}" is not defined in the equation, only ${e.join(", ")} are allowed.`);s=t.sym}}else if(void 0!==t.fn){const i=t.arg.map(t=>W(t,e));if("add"===t.fn)s=i.join(") + ("),s="("+s+")";else if("multiply"===t.fn)s=i.join(") * ("),s="("+s+")";else if("subtract"===t.fn)s=i[0]+"-"+i[1],s="("+s+")";else if("divide"===t.fn)s=i[0]+"/"+i[1],s="("+s+")";else if("negate"===t.fn)s="-"+i[0],s="("+s+")";else if("root"===t.fn)s=`Math.pow(${i[0]}', 1/${i[1]})`;else if("ln"===t.fn)s=`Math.log(${i[0]})`;else if("log"===t.fn){const n=t.sub?W(t.sub,e):i[1];s=`Math.log(${i[0]}) / Math.log(${n})`}else X[t.fn]&&(s=X[t.fn]+"("+i.join(", ")+")")}return t.sup&&(s=`Math.pow(${s}, ${W(t.sup,e)})`),s}class U{constructor(){this.updateODE(),N.subscribe((t,e)=>{if("changeValue"!==t.type)return;const s=t.payload.key;"ODEType"===s&&this.updateODE()})}stepFrom(t,e,s,i){switch(i){case A.RK2:this.stepFromRK2(t,e);break;case A.RK4:this.stepFromRK4(t,e);break;case A.EULER:this.stepFromEuler(t,e);break}if(s){const s=Math.sqrt(t.stepX**2+t.stepY**2)/e;t.stepX/=s,t.stepY/=s}t.posX+=t.stepX,t.posY+=t.stepY,t.dx=this.dxFunction(t.posX,t.posY),t.dy=this.dyFunction(t.posX,t.posY)}stepFromEuler(t,e){t.stepX=t.dx*e,t.stepY=t.dy*e}stepFromRK2(t,e){const s=t.posX,i=t.posY,n=t.dx,r=t.dy,o=this.dxFunction(s+.5*e*n,i+.5*e*r),a=this.dyFunction(s+.5*e*n,i+.5*e*r);t.stepX=e*(n+o)/2,t.stepY=e*(r+a)/2}stepFromRK4(t,e){const s=t.posX,i=t.posY,n=t.dx,r=t.dy,o=this.dxFunction(s+.5*e*n,i+.5*e*r),a=this.dyFunction(s+.5*e*n,i+.5*e*r),l=this.dxFunction(s+.5*e*o,i+.5*e*a),c=this.dyFunction(s+.5*e*o,i+.5*e*a),h=this.dxFunction(s+e*l,i+e*c),u=this.dyFunction(s+e*l,i+e*c);t.stepX=e*(n+2*o+2*l+h)/6,t.stepY=e*(r+2*a+2*c+u)/6}updateODE(){switch(N.state.settings.ODEType){case _.Polar:this.loadPolar();break;case _.Cartesian:this.loadCartesian();break;case _.Matrix:this.loadMatrix();break}}loadPolar(){const t=q(T.a.latexToAST(N.state.settings.drString),["r","t"]),e=q(T.a.latexToAST(N.state.settings.dtString),["r","t"]);this.dxFunction=((s,i)=>{const n=Math.sqrt(s**2+i**2),r=Math.atan2(i,s);return t(n,r)*Math.cos(r)-e(n,r)*n*Math.sin(r)}),this.dyFunction=((s,i)=>{const n=Math.sqrt(s**2+i**2),r=Math.atan2(i,s);return t(n,r)*Math.sin(r)+e(n,r)*n*Math.cos(r)}),this.dxFunction(0,0)}loadCartesian(){try{const e=q(T.a.latexToAST(N.state.settings.dxString)),s=q(T.a.latexToAST(N.state.settings.dyString));e(0,0),s(0,0),this.dxFunction=e,this.dyFunction=s}catch(t){console.log(t)}}loadMatrix(){const[t,e,s,i]=N.state.settings.AMatrix;this.dxFunction=((s,i)=>t*s+e*i),this.dyFunction=((t,e)=>s*t+i*e)}}class V{constructor(t,e,s,i){this.solutions=[],this.preview=[],this.paths=[],this.settings=s,this.svg=e,this.canvas=t,this.ODEEstimator=i,this.stepSize=s.solutionStepSize,this.subSteps=s.solutionSubSteps,this.length=s.solutionLength,this.method=s.solutionODEApproxMethod,this.setColor(),this.setWidth(),t.addEventListener("click",e=>{const{width:s,height:i}=t.getBoundingClientRect(),n=this.settings.viewbox.x.min+e.offsetX/s*(this.settings.viewbox.x.max-this.settings.viewbox.x.min),r=this.settings.viewbox.y.max-e.offsetY/i*(this.settings.viewbox.y.max-this.settings.viewbox.y.min);this.addSolution(n,r)})}setColor(){this.svg.style.setProperty("--solution-color",this.settings.solutionColor)}setWidth(){this.svg.style.setProperty("--solution-width",this.settings.solutionWidth.toString())}addSolution(t,e){const s=this.stepSize,i=this.length/this.stepSize,n={start:[t,e],dForwards:[],dBackwards:[]},r={posX:t,posY:e,stepX:0,stepY:0,dx:this.ODEEstimator.dxFunction(t,e),dy:this.ODEEstimator.dyFunction(t,e)};for(let o=0;o<i;o++){for(let t=0;t<=this.subSteps;t++)if(this.ODEEstimator.stepFrom(r,s/(this.subSteps+1),!1,this.method),!this.isInBounds(r.posX,r.posY))break;if(n.dForwards.push([r.posX,r.posY]),!this.isInBounds(r.posX,r.posY))break}r.posX=t,r.posY=e,r.dx=this.ODEEstimator.dxFunction(t,e),r.dy=this.ODEEstimator.dyFunction(t,e);for(let o=0;o<i;o++){for(let t=0;t<=this.subSteps;t++)if(this.ODEEstimator.stepFrom(r,-s/(this.subSteps+1),!1,this.method),!this.isInBounds(r.posX,r.posY))break;if(n.dBackwards.push([r.posX,r.posY]),!this.isInBounds(r.posX,r.posY))break}this.solutions.push(n),this.renderSolution(n)}isInBounds(t,e){return this.settings.viewbox.x.min<=t&&this.settings.viewbox.x.max>=t&&this.settings.viewbox.y.min<=e&&this.settings.viewbox.y.max>=e}renderSolution(t){const e=this.formatCoordinates(t.start),s=t.dForwards.map(t=>"L "+this.formatCoordinates(t)).join(" "),i=t.dBackwards.map(t=>"L "+this.formatCoordinates(t)).join(" "),n=`M ${e} ${s} M ${e} ${i}`,r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",n),r.classList.add("solution"),this.svg.appendChild(r),this.paths.push(r)}formatCoordinates([t,e]){const s=(t-this.settings.viewbox.x.min)/(this.settings.viewbox.x.max-this.settings.viewbox.x.min),i=(e-this.settings.viewbox.y.min)/(this.settings.viewbox.y.max-this.settings.viewbox.y.min),n=s*this.canvas.width,r=(1-i)*this.canvas.height;return`${n} ${r}`}clear(){while(this.paths.length>0){const t=this.paths.pop();this.svg.removeChild(t)}this.solutions=[]}render(){while(this.paths.length>0){const t=this.paths.pop();this.svg.removeChild(t)}for(const t of this.solutions)this.renderSolution(t)}updateSettings(t){this.settings=t}}class Y{constructor(t,e,s){this.listeners={render:[]},this.renderEvent=new Event("render"),N.dispatch("initPlot",this),this.canvas=t,this.svg=e,this.settings=s,this.grid=new D(e,this.settings),this.ODEEstimator=new U,this.solutions=new V(t,e,this.settings,this.ODEEstimator);const i=t.getContext("webgl",{preserveDrawingBuffer:!0});i||alert("Need WebGL support"),this.gl=i,this.nullclines=new g(this.gl,t.width,t.height,s,this.ODEEstimator),this.uniforms={},this.updateScreenSize(),this.updateViewBox(),this.arrowCloud=new R(this.gl,this.uniforms,this.settings,this.ODEEstimator),N.subscribe((t,e)=>{if("changeValue"!==t.type)return;this.settings=Object(h["cloneDeep"])(e.settings),this.arrowCloud.updateSettings(this.settings),this.grid.updateSettings(this.settings),this.solutions.updateSettings(this.settings),this.nullclines.updateSettings(this.settings);const s=t.payload.key;s.startsWith("viewbox")||"keepAspectRatio"===s?(this.updateViewBox(),this.nullclines.renderFunction()):"arrowMaxAge"===s?this.arrowCloud.initArrows():"arrowColor"===s||"arrowRandomColor"===s?this.arrowCloud.colorArrows():"arrowSize"===s?this.arrowCloud.resizeArrows():"ODEType"===s?(this.arrowCloud.initArrows(),this.solutions.clear(),this.nullclines.updateFunction()):"solutionStepSize"===s?this.solutions.stepSize=this.settings.solutionStepSize:"solutionLength"===s?this.solutions.length=this.settings.solutionLength:"solutionODEApproxMethod"===s?this.solutions.method=this.settings.solutionODEApproxMethod:"solutionColor"===s?this.solutions.setColor():"solutionWidth"===s?this.solutions.setWidth():"nullclineXColor"===s||"nullclineYColor"===s?this.nullclines.updateColor():"nullclineThreshold"===s?this.nullclines.updateThreshold():"nullclineXEnable"!==s&&"nullclineYEnable"!==s||this.nullclines.updateEnabled()})}updateScreenSize(){console.log(this.gl.canvas.width,this.gl.canvas.height),this.uniforms.u_screen=u["m4"].ortho(-this.gl.canvas.width/2,this.gl.canvas.width/2,-this.gl.canvas.height/2,this.gl.canvas.height/2,-1,1),this.grid.render(),this.solutions.render(),this.nullclines.updateSize(),this.nullclines.render(),this.arrowCloud&&this.arrowCloud.render()}updateViewBox(){this.uniforms.u_camera=u["m4"].ortho(this.settings.viewbox.x.min,this.settings.viewbox.x.max,this.settings.viewbox.y.min,this.settings.viewbox.y.max,-1,1),this.grid.render(),this.solutions.render(),this.nullclines.render(),this.arrowCloud&&this.arrowCloud.render()}addEventListener(t,e,s){null!==e&&(t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e))}removeEventListener(t,e,s){if(!e||!(t in this.listeners))return;const i=this.listeners[t],n=i.indexOf(e);n<0||i.splice(n,1)}dispatchEvent(t){if(!(t.type in this.listeners))return!0;for(const e of this.listeners[t.type])e(t);return!t.defaultPrevented}render(){N.state.plot.playing&&(this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.disable(this.gl.DEPTH_TEST),this.nullclines.render(),this.arrowCloud.render(),this.dispatchEvent(this.renderEvent)),requestAnimationFrame(()=>this.render())}}let H=class extends a["c"]{mounted(){this.particleRenderer=new Y(this.$refs.plot,this.$refs.grid,Object(h["cloneDeep"])(this.$store.state.settings)),window.particleRenderer=this.particleRenderer,this.onResize(),this.particleRenderer.render(),this.onResizeThrottled=Object(h["throttle"])(this.onResize,500,{leading:!1}),addEventListener("resize",this.onResizeThrottled),document.addEventListener("fullscreenchange",t=>{this.$store.commit("setFullscreen",null!=document.fullscreenElement)})}onResize(){if(!this.$el||!this.$refs.plot)return;const t=this.$el.clientWidth,e=this.$el.clientHeight;this.$refs.plot.setAttribute("width",`${t}`),this.$refs.plot.setAttribute("height",`${e}`),this.$refs.grid.setAttribute("width",`${t}`),this.$refs.grid.setAttribute("height",`${e}`),this.particleRenderer.updateScreenSize()}};H=Object(o["a"])([Object(a["a"])({})],H);var G=H,K=G,Q=(s("e9e5"),s("da07"),s("2877")),J=Object(Q["a"])(K,l,c,!1,null,"4726af9b",null),Z=J.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("app-tabs",{attrs:{id:"sideBar"}},[s("app-tab",{attrs:{title:"functions",text:"$$ \\dot{\\large{x}} $$"}},[s("app-equation-menu")],1),s("app-tab",{attrs:{title:"settings",icon:"settings"}},[s("app-settings-menu")],1),s("app-tab",{attrs:{title:"export/import",icon:"save_alt"}},[s("AppExportMenu")],1)],1)},et=[],st=s("3749"),it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"settings"}},[s("h1",{attrs:{id:"settings_title"}},[t._v("Settings")]),s("app-input-panel",{attrs:{title:"window"}},[s("app-input-group",{attrs:{title:"view"}},[s("app-input-number",{attrs:{label:"x min",varName:"viewbox.x.min",store:this.$store,max:this.$store.state.settings.viewbox.x.max-t.delta,step:t.delta}}),s("app-input-number",{attrs:{label:"x max",varName:"viewbox.x.max",store:this.$store,min:this.$store.state.settings.viewbox.x.min+t.delta,step:t.delta}}),s("app-input-number",{attrs:{label:"y min",varName:"viewbox.y.min",store:this.$store,max:this.$store.state.settings.viewbox.y.max-t.delta,step:t.delta}}),s("app-input-number",{attrs:{label:"y max",varName:"viewbox.y.max",store:this.$store,min:this.$store.state.settings.viewbox.y.min+t.delta,step:t.delta}})],1),s("app-input",{attrs:{label:"Keep aspect ratio",type:"checkbox",varName:"keepAspectRatio",store:this.$store,checked:this.$store.state.settings.keepAspectRatio}})],1),s("app-input-panel",{attrs:{title:"arrows"}},[s("app-input-number",{attrs:{label:"Number of arrows",varName:"arrowAmount",type:"number",store:this.$store,max:this.maxNumArrow}}),s("app-input-number",{attrs:{label:"Speed",varName:"speed",type:"number",store:this.$store,step:"0.1"}}),s("app-input",{attrs:{label:"Normalize speed",type:"checkbox",varName:"normalizeSpeed",store:this.$store,checked:this.$store.state.settings.normalizeSpeed}}),s("app-input-number",{attrs:{label:"Maximal age",varName:"arrowMaxAge",type:"number",store:this.$store,step:"1",min:"10"}}),s("app-input",{attrs:{label:"Random max age",type:"checkbox",varName:"arrowRandomizeMaxAge",store:this.$store,checked:this.$store.state.settings.arrowRandomizeMaxAge}}),s("app-input-number",{attrs:{label:"Size",varName:"arrowSize",type:"number",store:this.$store,min:"1.0",step:"0.1"}}),s("app-input",{attrs:{label:"Color",varName:"arrowColor",type:"color",store:this.$store}}),s("app-input",{attrs:{label:"Randomize color",type:"checkbox",varName:"arrowRandomColor",store:this.$store,checked:this.$store.state.settings.arrowRandomColor}}),s("label",{attrs:{for:"methodAprox"}},[t._v("approximation method")]),s("select",{directives:[{name:"model",rawName:"v-model.number",value:t.approxModel,expression:"approxModel",modifiers:{number:!0}}],attrs:{id:"methodAprox"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var s="_value"in e?e._value:e.value;return t._n(s)});t.approxModel=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("Euler")]),s("optgroup",{attrs:{label:"Runge-Kutta"}},[s("option",{attrs:{value:"1"}},[t._v("Second order")]),s("option",{attrs:{value:"2"}},[t._v("Fourth order")])])])],1),s("app-input-panel",{attrs:{title:"Solutions"}},[s("app-input-number",{attrs:{label:"Step size",varName:"solutionStepSize",store:this.$store,min:"0.001",step:"any"}}),s("app-input-number",{attrs:{label:"Sub steps",varName:"solutionSubSteps",store:this.$store,min:"0",step:"1"}}),s("app-input-number",{attrs:{label:"Length",varName:"solutionLength",store:this.$store,min:"1",step:"1"}}),s("app-input-number",{attrs:{label:"Width",varName:"solutionWidth",store:this.$store,min:"0"}}),s("app-input",{attrs:{label:"Color",varName:"solutionColor",type:"color",store:this.$store}}),s("label",{attrs:{for:"solutionMethodAprox"}},[t._v("approximation method")]),s("select",{directives:[{name:"model",rawName:"v-model.number",value:t.solutionMethodApprox,expression:"solutionMethodApprox",modifiers:{number:!0}}],attrs:{id:"solutionMethodAprox"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var s="_value"in e?e._value:e.value;return t._n(s)});t.solutionMethodApprox=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("Euler")]),s("optgroup",{attrs:{label:"Runge-Kutta"}},[s("option",{attrs:{value:"1"}},[t._v("Second order")]),s("option",{attrs:{value:"2"}},[t._v("Fourth order")])])])],1),s("app-input-panel",{attrs:{title:"Nullclines"}},[s("app-input-number",{attrs:{label:"Threshold",min:"0",step:"any",varName:"nullclineThreshold",store:this.$store}}),s("app-input-group",{attrs:{title:"x nullcline"}},[s("app-input",{attrs:{label:"enable",type:"checkbox",varName:"nullclineXEnable",store:this.$store,checked:this.$store.state.settings.nullclineXEnable}}),s("app-input",{attrs:{label:"color",varName:"nullclineXColor",type:"color",store:this.$store}})],1),s("app-input-group",{attrs:{title:"y nullcline"}},[s("app-input",{attrs:{label:"enable",type:"checkbox",varName:"nullclineYEnable",store:this.$store,checked:this.$store.state.settings.nullclineYEnable}}),s("app-input",{attrs:{label:"color",varName:"nullclineYColor",type:"color",store:this.$store}})],1)],1)],1)},nt=[],rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"groupLabel"},[s("span",{staticClass:"groupTitle"},[t._v(t._s(t.title))]),t._t("default")],2)},ot=[];let at=class extends a["c"]{};Object(o["a"])([Object(a["b"])(String)],at.prototype,"title",void 0),at=Object(o["a"])([Object(a["a"])()],at);var lt=at,ct=lt,ht=(s("7520"),Object(Q["a"])(ct,rt,ot,!1,null,"5be45982",null)),ut=ht.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel",class:{active:t.isActive}},[s("h2",{on:{click:function(e){t.isActive=!t.isActive}}},[s("span",{attrs:{id:"triangle"}},[t._v("▼")]),t._v(t._s(t._f("capitalize")(t.title))+"\n  ")]),s("div",{ref:"collapse",staticClass:"collapsible"},[t._t("default")],2)])},dt=[];let ft=class extends a["c"]{constructor(){super(...arguments),this.isActive=!0}};Object(o["a"])([Object(a["b"])(String)],ft.prototype,"title",void 0),ft=Object(o["a"])([Object(a["a"])({filters:{capitalize(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}}})],ft);var mt,gt=ft,vt=gt,bt=(s("079a"),Object(Q["a"])(vt,pt,dt,!1,null,"2e0e2f79",null)),xt=bt.exports;const yt="input_";let wt=mt=class extends a["c"]{static createLabel(t,e){return t("label",{domProps:{innerHTML:e.props.label},attrs:{for:yt+e.props.varName}})}static createInput(t,e){return t("input",{on:{change(t){t.target.checkValidity()&&("checkbox"===e.props.type?e.props.store.commit("changeValue",{key:e.props.varName,val:t.target.checked}):e.props.store.commit("changeValue",{key:e.props.varName,val:t.target.value}))}},domProps:{type:e.props.type,value:Object(h["get"])(e.props.store.state.settings,e.props.varName),id:yt+e.props.varName},attrs:Object(h["omit"])(e.data.attrs,["label","varName","type","store"])})}static createResetButton(t,e){return t("button",{on:{click(t){confirm(`Do you want to reset "${e.props.label}" to the default value?`)&&(e.props.store.dispatch("resetValue",e.props.varName),console.log("click"))}},domProps:{title:"Reset value"}},"↶")}render(t,e){const s=mt.createLabel(t,e),i=mt.createInput(t,e),n=mt.createResetButton(t,e),r=t("div",{class:"inputWrapper"},[i,n]);return[s,r]}};wt=mt=Object(o["a"])([Object(a["a"])({functional:!0})],wt);var _t,At,St,Et=wt,Mt=Et,Ot=Object(Q["a"])(Mt,_t,At,!1,null,null,null),$t=Ot.exports;const Ct="input_";let kt=St=class extends $t{static createInput(t,e){return t("input",{on:{change(t){t.target.hasAttribute("max")&&(t.target.value=Math.min(t.target.value,Number.parseFloat(t.target.getAttribute("max")))),t.target.hasAttribute("min")&&(t.target.value=Math.max(t.target.value,Number.parseFloat(t.target.getAttribute("min")))),t.target.checkValidity()?e.props.store.commit("changeValue",{key:e.props.varName,val:t.target.value}):t.target.reportValidity()}},domProps:{type:"number",value:Object(h["get"])(e.props.store.state.settings,e.props.varName),id:Ct+e.props.varName},attrs:Object(h["omit"])(e.data.attrs,["label","varName","type","store"])})}render(t,e){const s=$t.createLabel(t,e),i=St.createInput(t,e),n=$t.createResetButton(t,e),r=t("div",{class:"inputWrapper"},[i,n]);return[s,r]}};kt=St=Object(o["a"])([Object(a["a"])({functional:!0})],kt);var jt,Ft,Nt=kt,It=Nt,Pt=Object(Q["a"])(It,jt,Ft,!1,null,"6c37d060",null),Rt=Pt.exports,Lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"matrix"},[s("span",{ref:"label",staticClass:"matrixLabel"},[t._v(t._s(t.label))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.value[0],expression:"value[0]",modifiers:{number:!0}}],staticClass:"matrixInput mat11",attrs:{type:"number"},domProps:{value:t.value[0]},on:{input:[function(e){e.target.composing||t.$set(t.value,0,t._n(e.target.value))},t.input],blur:function(e){return t.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.value[1],expression:"value[1]",modifiers:{number:!0}}],staticClass:"matrixInput mat12",attrs:{type:"number"},domProps:{value:t.value[1]},on:{input:[function(e){e.target.composing||t.$set(t.value,1,t._n(e.target.value))},t.input],blur:function(e){return t.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.value[2],expression:"value[2]",modifiers:{number:!0}}],staticClass:"matrixInput mat21",attrs:{type:"number"},domProps:{value:t.value[2]},on:{input:[function(e){e.target.composing||t.$set(t.value,2,t._n(e.target.value))},t.input],blur:function(e){return t.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.value[3],expression:"value[3]",modifiers:{number:!0}}],staticClass:"matrixInput mat22",attrs:{type:"number"},domProps:{value:t.value[3]},on:{input:[function(e){e.target.composing||t.$set(t.value,3,t._n(e.target.value))},t.input],blur:function(e){return t.$forceUpdate()}}})])},Dt=[];let Bt=class extends a["c"]{mounted(){T.a.renderMathInElement(this.$refs.label)}input(){this.$emit("input",this.value)}};Object(o["a"])([Object(a["b"])(String)],Bt.prototype,"label",void 0),Object(o["a"])([Object(a["b"])({default:[2,-2,2,1]})],Bt.prototype,"value",void 0),Bt=Object(o["a"])([a["a"]],Bt);var Tt,zt=Bt,Xt=zt,qt=(s("feb0"),Object(Q["a"])(Xt,Lt,Dt,!1,null,"578bb082",null)),Wt=qt.exports;let Ut=Tt=class extends $t{static createInput(t,e){return t(Wt)}render(t,e){const s=$t.createLabel(t,e),i=Tt.createInput(t,e),n=$t.createResetButton(t,e),r=t("div",{class:"inputWrapper"},[i,n]);return[s,r]}};Ut=Tt=Object(o["a"])([Object(a["a"])({functional:!0})],Ut);var Vt,Yt,Ht=Ut,Gt=Ht,Kt=(s("e10d"),Object(Q["a"])(Gt,Vt,Yt,!1,null,"1ce9a08c",null)),Qt=Kt.exports;let Jt=class extends a["c"]{constructor(){super(...arguments),this.maxNumArrow=R.MAX_NUM_ARROWS,this.delta=.001}get approxModel(){return this.$store.state.settings.ODEAproxmethod}set approxModel(t){this.$store.commit("changeValue",{key:"ODEAproxmethod",val:t})}get solutionMethodApprox(){return this.$store.state.settings.solutionODEApproxMethod}set solutionMethodApprox(t){this.$store.commit("changeValue",{key:"solutionODEApproxMethod",val:t})}};Jt=Object(o["a"])([Object(a["a"])({components:{AppInput:$t,AppInputNumber:Rt,AppInputSwitch:Qt,AppInputGroup:ut,AppInputPanel:xt}})],Jt);var Zt=Jt,te=Zt,ee=(s("84a3"),Object(Q["a"])(te,it,nt,!1,null,null,null)),se=ee.exports,ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"export_menu"}},[s("h1",{attrs:{id:"settings_title"}},[t._v("Export & Import")]),s("app-input-panel",{attrs:{title:"Store in browser"}},[s("button",{on:{click:t.openSaveModal}},[t._v("Save")]),s("modal",{ref:"saveModal",scopedSlots:t._u([{key:"title",fn:function(){return[s("h1",[t._v("Save in browser")])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"input-grid"},[s("label",{attrs:{for:"save_name"}},[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.saveModalName,expression:"saveModalName"}],attrs:{id:"save_name"},domProps:{value:t.saveModalName},on:{input:function(e){e.target.composing||(t.saveModalName=e.target.value)}}}),s("label",{attrs:{for:"save_settings"}},[t._v("Save settings")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.saveModalSettings,expression:"saveModalSettings"}],attrs:{type:"checkbox",id:"save_settings"},domProps:{checked:Array.isArray(t.saveModalSettings)?t._i(t.saveModalSettings,null)>-1:t.saveModalSettings},on:{change:function(e){var s=t.saveModalSettings,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);i.checked?o<0&&(t.saveModalSettings=s.concat([r])):o>-1&&(t.saveModalSettings=s.slice(0,o).concat(s.slice(o+1)))}else t.saveModalSettings=n}}}),s("label",{attrs:{for:"save_equations"}},[t._v("Save equations")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.saveModalEquations,expression:"saveModalEquations"}],attrs:{type:"checkbox",id:"save_equations"},domProps:{checked:Array.isArray(t.saveModalEquations)?t._i(t.saveModalEquations,null)>-1:t.saveModalEquations},on:{change:function(e){var s=t.saveModalEquations,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);i.checked?o<0&&(t.saveModalEquations=s.concat([r])):o>-1&&(t.saveModalEquations=s.slice(0,o).concat(s.slice(o+1)))}else t.saveModalEquations=n}}})])]},proxy:!0},{key:"footer",fn:function(){return[s("button",{staticClass:"positive",on:{click:t.saveLocally}},[t._v("Save")]),s("button",{on:{click:t.closeSaveModal}},[t._v("Cancel")])]},proxy:!0}])}),s("button",{on:{click:t.openLoadModal}},[t._v("Load")]),s("modal",{ref:"loadModal",scopedSlots:t._u([{key:"title",fn:function(){return[s("h1",[t._v("Load from browser")])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"input-grid column3"},[t._l(t.savesList,function(e){return[s("div",{key:e+"name",staticClass:"grid-start"},[t._v(t._s(e))]),s("button",{key:e+"load",staticClass:"positive",on:{click:function(s){return t.load(e)}}},[t._v("\n                load\n              ")]),"default"!==e?s("button",{key:e+"del",on:{click:function(s){return t.removeSave(e)}}},[t._v("\n                remove\n              ")]):t._e()]})],2)]},proxy:!0},{key:"footer",fn:function(){return[s("button",{on:{click:function(e){return t.closeLoadModal()}}},[t._v("Cancel")])]},proxy:!0}])})],1),s("app-input-panel",{attrs:{title:"Download & Upload"}},[s("label",{attrs:{for:"download_settings"}},[t._v("Download settings")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.downloadSettings,expression:"downloadSettings"}],attrs:{type:"checkbox",id:"download_settings"},domProps:{checked:Array.isArray(t.downloadSettings)?t._i(t.downloadSettings,null)>-1:t.downloadSettings},on:{change:function(e){var s=t.downloadSettings,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);i.checked?o<0&&(t.downloadSettings=s.concat([r])):o>-1&&(t.downloadSettings=s.slice(0,o).concat(s.slice(o+1)))}else t.downloadSettings=n}}}),s("label",{attrs:{for:"download_equations"}},[t._v("Download equations")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.downloadEquations,expression:"downloadEquations"}],attrs:{type:"checkbox",id:"download_equations"},domProps:{checked:Array.isArray(t.downloadEquations)?t._i(t.downloadEquations,null)>-1:t.downloadEquations},on:{change:function(e){var s=t.downloadEquations,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);i.checked?o<0&&(t.downloadEquations=s.concat([r])):o>-1&&(t.downloadEquations=s.slice(0,o).concat(s.slice(o+1)))}else t.downloadEquations=n}}}),s("button",{on:{click:t.downloadSave}},[t._v("Download")]),s("button",{on:{click:t.uploadSave}},[t._v("Upload")])]),s("app-input-panel",{attrs:{title:"Download image"}},[s("label",{attrs:{for:"imgtype"}},[t._v("File type")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.imgType,expression:"imgType"}],attrs:{id:"imgtype"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.imgType=e.target.multiple?s:s[0]}}},[s("option",[t._v("png")]),s("option",[t._v("jpg")])]),s("button",{staticClass:"width2",on:{click:t.downloadImage}},[t._v("Download")])]),s("app-input-panel",{attrs:{title:"Download video"}},[s("label",{attrs:{for:"videotype"}},[t._v("File type")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.videoType,expression:"videoType"}],attrs:{id:"videotype"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.videoType=e.target.multiple?s:s[0]}}},[t._l(t.codecs,function(e,i){return t.isVideoTypeSupported(i)?[s("option",{domProps:{value:i}},[t._v(t._s(e))])]:t._e()})],2),s("button",{staticClass:"width2",on:{click:t.downloadVideo}},[t._v("Download")])])],1)},ne=[],re=(s("ac6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.opened,expression:"opened"}],staticClass:"background",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[s("div",{staticClass:"modal"},[s("div",{staticClass:"header"},[t._t("title")],2),s("div",{staticClass:"body"},[t._t("body")],2),s("div",{staticClass:"footer"},[t._t("footer",[s("button",{on:{click:t.close}},[t._v("Close")])])],2)])])}),oe=[];let ae=class extends a["c"]{constructor(){super(...arguments),this.opened=!1}toggle(){this.opened=!this.opened}open(){this.opened=!0}close(){this.opened=!1}};ae=Object(o["a"])([Object(a["a"])({components:{}})],ae);var le=ae,ce=le,he=(s("cea1"),Object(Q["a"])(ce,re,oe,!1,null,"54814b62",null)),ue=he.exports;let pe;function de(){fe();const t=indexedDB.open("settings",1);pe=new Promise((e,s)=>{t.onerror=(e=>{console.log("Error opening indexedDB: ",t.error),s(t.error)}),t.onsuccess=(s=>{e(t.result)}),t.onupgradeneeded=(s=>{const i=t.result,n=i.createObjectStore("settings");n.transaction.oncomplete=(s=>{ge("default",M),e(t.result)})})})}function fe(){navigator.storage.persisted().then(t=>{t||navigator.storage.persist().then(t=>{t?console.log("Successfully got persistent storage"):console.log("Did not get got persistent storage")})})}async function me(t){const e=await pe;return e.transaction("settings",t).objectStore("settings")}async function ge(t,e){const s=await me("readwrite");s.put(e,t)}async function ve(){const t=await me("readwrite"),e=t.getAllKeys();return new Promise((t,s)=>{e.onsuccess=(()=>t(e.result)),e.onerror=(()=>s(e.error))})}async function be(t){const e=await me("readwrite"),s=e.get(t);return new Promise((t,e)=>{s.onsuccess=(()=>t(s.result)),s.onerror=(()=>e(s.error))})}async function xe(t){const e=await me("readwrite"),s=e.delete(t);return new Promise((t,e)=>{s.onsuccess=(()=>t(s.result)),s.onerror=(()=>e(s.error))})}de();s("09a9"),s("9fdb");function ye(t,e){for(let s=0;s<t.childNodes.length;s++){const i=t.childNodes[s];if("svg"===i.tagName||"g"===i.tagName)ye(i,e.childNodes[s]);else{const t=getComputedStyle(e.childNodes[s]);if(!t)continue;for(const e of t)i.style.setProperty(e,t.getPropertyValue(e))}}}function we(t){const e=t.getContext("2d"),s=e.getImageData(0,0,t.width,t.height),i=s.data;for(let n=0;n<i.length;n+=4){const t=i[n+3]/255,e=255*(1-t);i[n]=i[n]*t+e,i[n+1]=i[n+1]*t+e,i[n+2]=i[n+2]*t+e,i[n+3]=255}e.putImageData(s,0,0)}async function _e(t,e){const s=e.outerHTML,i=t.getContext("2d"),n=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(n),o=new Image;return new Promise(t=>{o.onload=(()=>{i.drawImage(o,0,0),URL.revokeObjectURL(r),t()}),o.src=r})}function Ae(t){const e=document.createElement("a"),s=t.toDataURL("image/png");e.download="plot.png",e.href=s,e.click()}function Se(t){const e=document.createElement("a"),s=t.toDataURL("image/jpeg");e.download="plot.jpg",e.href=s,e.click(),e.remove()}function Ee(t,e){const s=e.cloneNode(!0);ye(s,e);const i=document.createElement("canvas"),n=e.getBoundingClientRect();i.width=n.width,i.height=n.height;const r=i.getContext("2d");return r.drawImage(t,0,0),_e(i,s),i}async function Me(t,e){const s=await Ee(t,e);Ae(s),s.remove()}async function Oe(t,e){const s=await Ee(t,e);we(s),Se(s),s.remove()}function $e(t,e,s){const i=e.cloneNode(!0);ye(i,e);const n=document.createElement("canvas"),r=document.createElement("canvas"),o=e.getBoundingClientRect();n.width=o.width,n.height=o.height,r.width=o.width,r.height=o.height;const a=r.getContext("2d");_e(n,i),a.fillStyle="white";let l=!1;function c(){l||(a.fillRect(0,0,o.width,o.height),a.drawImage(t,0,0),a.drawImage(n,0,0),requestAnimationFrame(c))}return requestAnimationFrame(c),setTimeout(()=>l=!0,s),r}async function Ce(t,e,s,i){const n=$e(s,i,e),r=n.captureStream(24),o=new MediaRecorder(r,{mimeType:t});let a="";t.startsWith("video/webm")?a="webm":t.startsWith("video/x-matroska")?a="mkv":t.startsWith("video/mp4")&&(a="mp4");const l=[];setTimeout(()=>o.stop(),e),o.onstop=(t=>{const e=new Blob(l,{type:"video/webm"}),s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download="plot_view."+a,i.click()}),o.ondataavailable=function(t){console.log("data"),l.push(t.data)},o.start()}let ke=class extends a["c"]{constructor(){super(...arguments),this.imgType="png",this.videoType="video/webm;codecs=vp9",this.codecs={"video/webm;codecs=vp9":"webm (vp9)","video/webm;codecs=vp8":"webm (vp8)","video/x-matroska;codecs=avc1":"mkv (avc1)","video/mp4; codecs=avc1":"mp4 (avc1)"},this.saveModalName="my beautiful plot",this.saveModalSettings=!0,this.saveModalEquations=!0,this.downloadSettings=!0,this.downloadEquations=!0,this.savesList=[]}isVideoTypeSupported(t){return MediaRecorder.isTypeSupported(t)}downloadImage(){const t=document.querySelector("canvas"),e=document.querySelector("svg");"png"===this.imgType?Me(t,e):"jpg"===this.imgType&&Oe(t,e),console.log("Downloading image as "+this.imgType)}downloadVideo(){const t=document.querySelector("canvas"),e=document.querySelector("svg");Ce(this.videoType,5e3,t,e),console.log("Downloading video as "+this.videoType)}openSaveModal(){this.$refs.saveModal.open()}closeSaveModal(){this.$refs.saveModal.close()}openLoadModal(){this.updateSavesList(),this.$refs.loadModal.open()}closeLoadModal(){this.$refs.loadModal.close()}downloadSave(){const t=this.getSettingsAndEquations(this.saveModalSettings,this.saveModalEquations),e=new Blob([JSON.stringify(t,null,2)]),s=URL.createObjectURL(e),i=document.createElement("a"),n=new Date,r=n.getDate()+"-"+(n.getMonth()+1)+"-"+n.getFullYear()+"_"+n.getHours()+"-"+n.getMinutes()+"-"+n.getSeconds();i.style.display="none",i.href=s,i.download="ODE-graph-"+r+".json",i.click(),URL.revokeObjectURL(s),i.remove()}uploadSave(){const t=document.createElement("input");t.addEventListener("change",e=>{const s=t.files;if(!s||1!==s.length)return;const i=s[0];i.text().then(t=>{const e=JSON.parse(t);for(const[s,i]of Object.entries(e))this.$store.commit("changeValue",{key:s,val:i})})}),t.type="file",t.accept=".json",t.click(),t.remove()}load(t){be(t).then(t=>{for(const[e,s]of Object.entries(t))this.$store.commit("changeValue",{key:e,val:s})}),this.closeLoadModal()}removeSave(t){xe(t).then(()=>{this.updateSavesList()})}saveLocally(){console.log(this.saveModalName,this.saveModalSettings,this.saveModalEquations);const t=this.getSettingsAndEquations(this.downloadSettings,this.downloadEquations);ge(this.saveModalName,t).then(()=>{console.log("success")}).catch(t=>{console.warn(t)}),this.closeSaveModal()}getSettingsAndEquations(t,e){let s=this.$store.state.settings;if(!t&&!e)return{};if(!e){const{dxString:t,dyString:e,drString:i,dtString:n,AMatrix:r,ODEType:o,...a}=s;s=a}if(!t){const{dxString:t,dyString:e,drString:i,dtString:n,AMatrix:r,ODEType:o}=s;s={dxString:t,dyString:e,drString:i,dtString:n,AMatrix:r,ODEType:o}}return s}updateSavesList(){ve().then(t=>{console.log(t),this.savesList=t})}};ke=Object(o["a"])([Object(a["a"])({components:{AppInputGroup:ut,AppInputPanel:xt,AppInput:$t,Modal:ue}})],ke);var je=ke,Fe=je,Ne=(s("9c7b"),Object(Q["a"])(Fe,ie,ne,!1,null,"73a28f51",null)),Ie=Ne.exports,Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"tabs",staticClass:"tabs"},[s("ul",{staticClass:"menu"},t._l(t.tabs,function(e){return s("li",{key:e.$props.title,staticClass:"menuItem",class:{active:e.activated},attrs:{title:e.$props.title},on:{click:function(s){return t.activate(e)}}},[e.$props.icon?s("i",{ref:"icon",refInFor:!0,staticClass:"material-icons"},[t._v(t._s(e.$props.icon))]):t._e(),e.$props.text?s("span",{ref:"text",refInFor:!0},[t._v(t._s(e.$props.text))]):t._e()])}),0),t._t("default")],2)},Re=[];let Le=class extends a["c"]{constructor(){super(...arguments),this.tabs=[]}created(){this.tabs=this.$children}mounted(){window.addEventListener("resize",()=>this.onResize()),this.onResize()}updated(){console.log("updated",this.$refs);const t=this.$refs.text||[];for(const e of t)T.a.renderMathInElement(e)}onResize(){const t=this.tabs.find(t=>t.activated)||this.tabs[0];this.activate(t)}activate(t){for(const e of this.tabs)e.activated=!1;t.activated=!0}};Le=Object(o["a"])([Object(a["a"])({})],Le);var De=Le,Be=De,Te=(s("33ce"),s("9590"),Object(Q["a"])(Be,Pe,Re,!1,null,"2b0e1a68",null)),ze=Te.exports,Xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.activated,expression:"activated"}],staticClass:"tab",class:{activated:t.activated}},[t._t("default")],2)},qe=[];let We=class extends a["c"]{constructor(){super(...arguments),this.activated=!1}};Object(o["a"])([Object(a["b"])(String)],We.prototype,"icon",void 0),Object(o["a"])([Object(a["b"])(String)],We.prototype,"text",void 0),Object(o["a"])([Object(a["b"])(String)],We.prototype,"title",void 0),We=Object(o["a"])([Object(a["a"])({})],We);var Ue=We,Ve=Ue,Ye=(s("91ae"),Object(Q["a"])(Ve,Xe,qe,!1,null,"432c882e",null)),He=Ye.exports,Ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"equationMenu"},[s("h2",{attrs:{id:"equation_title"}},[t._v("Equations")]),s("app-tabs",{ref:"tabs"},[s("app-tab",{ref:"tabCartesian",attrs:{title:"cartesian",text:"$$ \\dot{x}, \\dot{y} $$"}},[s("app-math-input",{staticClass:"mathInput",attrs:{label:"$$\\dot{x}=$$"},on:{input:function(e){t.dx=e}}},[t._v(t._s(t.dx))]),s("app-math-input",{staticClass:"mathInput",attrs:{label:"$$\\dot{y}=$$"},on:{input:function(e){t.dy=e}}},[t._v(t._s(t.dy))]),s("button",{staticClass:"applyButton",on:{click:t.enableCartesian}},[t._v("Apply")])],1),s("app-tab",{ref:"tabMatrix",attrs:{title:"matrix",text:"$$ \\dot{\\vec{x}} = A\\vec{x} $$"}},[s("app-input-matrix",{staticClass:"matrix",attrs:{label:"$$ A= $$"},model:{value:t.A,callback:function(e){t.A=e},expression:"A"}}),s("button",{staticClass:"applyButton",on:{click:t.enableMatrix}},[t._v("Apply")])],1),s("app-tab",{ref:"tabPolar",attrs:{title:"polar",text:"$$ \\dot{r}, \\dot{\\theta} $$"}},[s("span",{ref:"polarNotice",attrs:{id:"polarNotice"}},[t._v("\n        The variable $$ \\theta $$ can be typed "),s("br"),t._v("\n        both as $$ \\theta $$ or as $$ t $$ for ease of typing.\n      ")]),s("app-math-input",{staticClass:"mathInput",attrs:{label:"$$\\dot{r}=$$"},on:{input:function(e){t.dr=e}}},[t._v(t._s(t.dr))]),s("app-math-input",{staticClass:"mathInput",attrs:{label:"$$\\dot{\\theta}=$$"},on:{input:function(e){t.dt=e}}},[t._v(t._s(t.dt))]),s("button",{staticClass:"applyButton",on:{click:t.enablePolar}},[t._v("Apply")])],1)],1)],1)},Ke=[],Qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mathinput"},[s("div",{ref:"label",staticClass:"mathfieldLabel"},[t._v(t._s(t.label))]),s("div",{ref:"mathfield",staticClass:"mathfield",attrs:{id:t.id}},[t._t("default")],2)])},Je=[];let Ze=class extends a["c"]{mounted(){T.a.makeMathField(this.$refs.mathfield,{virtualKeyboardMode:"off",onFocus:t=>{this.$refs.mathfield.classList.add("focus"),this.$emit("focus",t)},onBlur:t=>{this.$refs.mathfield.classList.remove("focus"),this.$emit("focus",t)},onKeystroke:(t,e,s)=>{return this.$emit("focus",s),!0},onContentDidChange:t=>{return this.$emit("input",t),!0}}),T.a.renderMathInElement(this.$refs.label)}};Object(o["a"])([Object(a["b"])({default:""})],Ze.prototype,"id",void 0),Object(o["a"])([Object(a["b"])({default:""})],Ze.prototype,"label",void 0),Object(o["a"])([Object(a["b"])({default:""})],Ze.prototype,"value",void 0),Object(o["a"])([Object(a["b"])({default:()=>{}})],Ze.prototype,"config",void 0),Ze=Object(o["a"])([a["a"]],Ze);var ts=Ze,es=ts,ss=(s("db97"),s("65b8"),Object(Q["a"])(es,Qe,Je,!1,null,"26f0ff49",null)),is=ss.exports;let ns=class extends a["c"]{constructor(){super(...arguments),this.formula=""}mounted(){switch(T.a.renderMathInElement(this.$refs.polarNotice),this.$store.state.settings.ODEType){case _.Matrix:this.$refs.tabs.activate(this.$refs.tabMatrix);break;case _.Cartesian:this.$refs.tabs.activate(this.$refs.tabCartesian);break;case _.Polar:this.$refs.tabs.activate(this.$refs.tabPolar);break}}enableMatrix(){this.$store.commit("changeValue",{key:"ODEType",val:_.Matrix})}enableCartesian(){this.$store.commit("changeValue",{key:"ODEType",val:_.Cartesian})}enablePolar(){this.$store.commit("changeValue",{key:"ODEType",val:_.Polar})}get dx(){return this.$store.state.settings.dxString}set dx(t){this.$store.commit("changeValue",{key:"dxString",val:t.text("latex")})}get dy(){return this.$store.state.settings.dyString}set dy(t){this.$store.commit("changeValue",{key:"dyString",val:t.text("latex")})}get dr(){return this.$store.state.settings.drString}set dr(t){this.$store.commit("changeValue",{key:"drString",val:t.text("latex")})}get dt(){return this.$store.state.settings.dtString}set dt(t){this.$store.commit("changeValue",{key:"dtString",val:t.text("latex")})}get A(){return this.$store.state.settings.AMatrix}set A(t){this.$store.commit("changeValue",{key:"AMatrix",val:t})}};ns=Object(o["a"])([Object(a["a"])({components:{AppMathInput:is,AppInputMatrix:Wt,AppTabs:ze,AppTab:He}})],ns);var rs,os,as=ns,ls=as,cs=(s("238d"),Object(Q["a"])(ls,Ge,Ke,!1,null,"cec468c8",null)),hs=cs.exports;let us=(rs=Object(a["a"])({components:{AppSettingsMenu:se,AppExportMenu:Ie,SettingsIcon:st["a"],AppTabs:ze,AppTab:He,AppEquationMenu:hs}}),rs(os=class extends a["c"]{get activeTab(){return this.$store.state.settings.ODEType}})||os);var ps,ds,fs=us,ms=(s("c35c"),Object(Q["a"])(fs,tt,et,!1,null,"3e70322c",null)),gs=ms.exports,vs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"titleBox"}},[s("h1",{ref:"title",attrs:{id:"title"}},[t._v("$$d \\text{ODE} p$$")]),s("h2",{attrs:{id:"subtitle"}},[t._v("A dynamic ODE plotter")]),s("h2",{attrs:{id:"author"}},[t._v("by Martijn Besamusca")])])},bs=[];let xs=(ps=Object(a["a"])(),ps(ds=class extends a["c"]{mounted(){T.a.renderMathInElement(this.$refs.title)}})||ds);var ys=xs,ws=(s("e0bb"),Object(Q["a"])(ys,vs,bs,!1,null,"0be19de4",null)),_s=ws.exports,As=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modular-panes",class:"modular-panes-"+t.direction,style:t.style},[t._t("default")],2)},Ss=[];let Es=class extends a["c"]{constructor(){super(...arguments),this.activeResizingElms=null}get style(){return{flexDirection:this.direction}}addHandlers(){for(let t=0;t<this.$slots.default.length-1;t++){const e=this.$slots.default[t],s=this.$slots.default[t+1],i=document.createElement("div");i.classList.add("handler"),i.addEventListener("mousedown",t=>{this.activeResizingElms=[e,s],t.preventDefault()}),addEventListener("mousemove",t=>{if(!this.activeResizingElms)return;t.preventDefault();const e=t.movementX/this.$el.clientWidth;this.activeResizingElms[0].componentInstance.$data.width+=e,this.activeResizingElms[1].componentInstance.$data.width-=e,console.log(e)}),addEventListener("mouseup",t=>{this.activeResizingElms=null}),this.$el.insertBefore(i,s.elm)}}mounted(){this.addHandlers()}};Object(o["a"])([Object(a["b"])(String)],Es.prototype,"direction",void 0),Es=Object(o["a"])([Object(a["a"])({components:{}})],Es);var Ms=Es,Os=Ms,$s=(s("49df"),s("9882"),Object(Q["a"])(Os,As,Ss,!1,null,"3c9cc837",null)),Cs=$s.exports,ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pane",style:t.style},[t._t("default")],2)},js=[];let Fs=class extends a["c"]{constructor(){super(...arguments),this.paneType=null,this.width=this.size}get style(){return{"--pane-width":100*this.width+"%",minWidth:this.minSize,minHeight:this.minSize,maxWidth:this.maxSize,maxHeight:this.maxSize}}mounted(){}};Object(o["a"])([Object(a["b"])(String)],Fs.prototype,"paneName",void 0),Object(o["a"])([Object(a["b"])(Number)],Fs.prototype,"size",void 0),Object(o["a"])([Object(a["b"])(String)],Fs.prototype,"minSize",void 0),Object(o["a"])([Object(a["b"])(String)],Fs.prototype,"maxSize",void 0),Fs=Object(o["a"])([Object(a["a"])({components:{}})],Fs);var Ns=Fs,Is=Ns,Ps=(s("9603"),Object(Q["a"])(Is,ks,js,!1,null,"1dd709e4",null)),Rs=Ps.exports,Ls=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{collapse:t.fullscreen},attrs:{id:"app_control_bar"}},[s("span",[t._v("x: "+t._s(t.cursorX.toPrecision(3))+", y: "+t._s(t.cursorY.toPrecision(3)))]),s("span",{staticClass:"spacer"}),s("i",{staticClass:"material-icons",attrs:{id:"refresh"},on:{refresh:t.refresh}},[t._v("refresh")]),t.playing?s("i",{staticClass:"material-icons",on:{click:t.playOrPause}},[t._v("pause")]):s("i",{staticClass:"material-icons",on:{click:t.playOrPause}},[t._v("play_arrow")]),t.fullscreen?s("i",{staticClass:"material-icons",on:{click:t.openFullscreen}},[t._v("fullscreen_exit")]):s("i",{staticClass:"material-icons",on:{click:t.openFullscreen}},[t._v("fullscreen")])])},Ds=[];let Bs=class extends a["c"]{constructor(){super(...arguments),this.cursorX=0,this.cursorY=0}get playing(){return this.$store.state.plot.playing}get fullscreen(){return this.$store.state.plot.fullscreen}openFullscreen(){this.$store.dispatch("requestFullscreen")}playOrPause(){this.$store.dispatch("playOrPause")}refresh(){location.reload(!1)}mounted(){const t=this.$store.state.settings.viewbox,e=document.getElementById("canvas");e.addEventListener("mousemove",s=>{const{width:i,height:n}=e.getBoundingClientRect();this.cursorX=t.x.min+s.offsetX/i*(t.x.max-t.x.min),this.cursorY=t.y.max-s.offsetY/n*(t.y.max-t.y.min)})}};Bs=Object(o["a"])([Object(a["a"])({})],Bs);var Ts=Bs,zs=Ts,Xs=(s("e3f6"),Object(Q["a"])(zs,Ls,Ds,!1,null,"5f23a527",null)),qs=Xs.exports;let Ws=class extends a["c"]{mounted(){}};Ws=Object(o["a"])([Object(a["a"])({components:{AppControlBar:qs,ModularPanes:Cs,ModularPane:Rs,AppPlot:Z,AppSideBar:gs,AppTitleBar:_s}})],Ws);var Us=Ws,Vs=Us,Ys=(s("5c0b"),s("b0a0"),Object(Q["a"])(Vs,n,r,!1,null,null,null)),Hs=Ys.exports,Gs=s("9483");Object(Gs["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),i["a"].config.productionTip=!1,i["a"].config.performance=!1,new i["a"]({store:N,render:t=>t(Hs)}).$mount("#app")},cea1:function(t,e,s){"use strict";var i=s("ba48"),n=s.n(i);n.a},cf2f:function(t,e,s){},d134:function(t,e,s){},d93c:function(t,e,s){},da07:function(t,e,s){"use strict";var i=s("ef71"),n=s.n(i);n.a},db97:function(t,e,s){"use strict";var i=s("6a54"),n=s.n(i);n.a},e0bb:function(t,e,s){"use strict";var i=s("0671"),n=s.n(i);n.a},e10d:function(t,e,s){"use strict";var i=s("d93c"),n=s.n(i);n.a},e332:function(t,e,s){},e3f6:function(t,e,s){"use strict";var i=s("cf2f"),n=s.n(i);n.a},e9e5:function(t,e,s){"use strict";var i=s("2e1a"),n=s.n(i);n.a},ef71:function(t,e,s){},efa9:function(t,e,s){},f147:function(t,e,s){},feb0:function(t,e,s){"use strict";var i=s("a0aa"),n=s.n(i);n.a}});
//# sourceMappingURL=app-legacy.e455b4ec.js.map